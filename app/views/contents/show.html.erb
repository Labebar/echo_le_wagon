<div class="container" data-controller="toggle-section">
  <%= content_for :title, @content.name %>
  <h1><%= @content.name %></h1>
  <p><em>Durée : <%= format_duration(@content.duration) %></em></p>

  <%= image_tag @content.thumbnail, class: "img-fluid" if @content.thumbnail.present? %>

  <% if (src = youtube_embed_url(@content.url)) %>
    <div class="video-container">
      <iframe
        src="<%= src %>"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen>
      </iframe>
    </div>
  <% else %>
    <p>Impossible d’extraire l’ID YouTube depuis l’URL !</p>
  <% end %>

  <p>Language <strong><%= @content.language %></strong></p>
  <p>This content is <%= @content.duration %> min long</p>

  <%= link_to 'EDIT', edit_content_path(@content), class: 'custom-button' %>

  <!-- Boutons -->
  <%= button_tag 'SUMMARY', type: 'button', class: 'custom-button', data: { action: "toggle-section#toggle", target_id: "summary-section" } %>
  <%= button_tag 'QUIZZ', type: 'button', class: 'custom-button', data: { action: "toggle-section#toggle quiz-loader#startQuiz", target_id: "quizz-section" } %>  <%= button_tag 'ASK IA', type: 'button', class: 'custom-button', data: { action: "toggle-section#toggle", target_id: "#" } %>
  <%= button_tag 'NOTES', type: 'button', class: 'custom-button', data: { action: "toggle-section#toggle", target_id: "#" } %>

  <!-- Résumé -->
  <div id="summary-section" class="summary-text" data-toggle-section-target="section" style="display: none;">
    <h2>Résumé</h2>
    <%= raw @content.summary[7..-4] %>
  </div>

  <!-- QUIZZ Dynamique -->
 <div id="quizz-section"
     data-controller="quiz-loader"
     data-quiz-loader-url-value="<%= generate_question_content_path(@content) %>"
     data-toggle-section-target="section"
     style="display: block;">
  <h2>Quiz questions</h2>
  <div id="quiz-container"></div>

  <div class="mt-3">
    <button data-action="quiz-loader#generateQuestion" class="btn btn-primary">Next Question</button>
  </div>
</div>
</div>
